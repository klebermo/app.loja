<!doctype html>
<html lang="pt-br">
  <body>
    <div id="form-container">
      <table class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>Credencial</th>
            <th></th>
          </tr>
        </thead>

        <tbody>
          <tr th:each="credencial : ${credenciais}">
            <th:block th:with="possui = 'not'">
              <th:block th:each="c : ${command.credenciais}" th:if="${#strings.equals(c, credencial)}" th:with="possui = 'yes'">
                <td>
                  <input type="checkbox" class="form-check-input" th:id="${credencial.id}" th:checked="${#strings.equals(possui, 'yes')}" th:attr="data-usuario=${command.id},data-url=@{/usuario/toggle_credencial}" onchange="toggle_credencial(this)"/>
                </td>

                <td>
                  <span th:text="${credencial.nome}"></span>
                </td>

                <td>
                  <ul>
                    <li th:each="autorizacao : ${credencial.autorizacoes}" th:text="${autorizacao.nome}"></li>
                  </ul>
                </td>
              </th:block>
            </th:block>
          </tr>
        </tbody>

        <tfoot>
          <tr>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tfoot>
      </table>

      <button type="button" class="btn btn-link" id="cancel" th:attr="data-id=${command.id}" onclick="cancel_credencial(this);">Cancelar</button>
    </div>
  </body>
</html>
