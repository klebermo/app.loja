<th:block th:fragment="copy">
  <div class="media">
    <th:block th:each="p : ${produtos}" th:if="${p.forum.id == forum.id}">
      <img th:if="${p.icone}" th:src="@{/imagem/download/__${p.icone.id}__}" width="64" height="64" class="mr-3" th:alt="${p.nome}">
      <h1 th:unless="${p.icone}"> <i class="fas fa-box"></i> </h1>
    </th:block>
    <div class="media-body">
      <div class="container">
        <div class="row">
          <div class="col-3">
            <h3 class="mt-0">Forum <small th:each="p : ${produtos}" th:if="${p.forum.id == forum.id}" th:text="${p.nome}"></small></h3>
          </div>
          <div class="col-6">
          </div>
          <div class="col-3">
            <table>
              <tr>
                <td>
                  <a class="btn btn-primary btn-lg" th:each="p : ${produtos}" th:if="${p.forum.id == forum.id}" th:href="@{/p/__${p.nome}__}" role="button">
                    <i class="fas fa-arrow-circle-left"></i>
                    Voltar
                  </a>
                </td>
                <td>
                  <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#novo_topico">
                    <i class="fas fa-plus-square"></i>
                    Novo tópico
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="album py-5 bg-light">
    <div class="row" th:if="${forum.topicos}">
      <div class="col-md-4" th:each="topico : ${forum.topicos}">
        <div class="card mb-4 shadow-sm">
          <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Thumbnail"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c"/><text x="50%" y="50%" fill="#eceeef" dy=".3em">Tópico</text></svg>
          <div class="card-body">
            <p class="card-text" th:text="${topico.titulo}"></p>
            <div class="d-flex justify-content-between align-items-center">
              <div class="btn-group">
                <a th:href="@{/topic/view/__${topico.id}__}" class="btn btn-sm btn-outline-secondary">Ver</a>
              </div>
              <small class="text-muted" th:text="${topico.dataPublicacao}"></small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="novo_topico" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Novo tópico</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="alert alert-success alert-dismissible fade show" id="ok" role="alert" style="display: none;">
            <strong>Sucesso!</strong> Pergunta enviada com sucesso!
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="alert alert-danger alert-dismissible fade show" id="error" role="alert" style="display: none;">
            <strong>Erro!</strong> Ocorreu um erro ao tentar enviar a pergunta!
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <form class="form" id="form" th:action="@{/topic/save}" method="post">
            <div class="form-group">
              <label for="titulo">titulo</label>
              <input type="text" name="titulo" class="form-control" id="titulo">
            </div>
            <div class="form-group">
              <label for="descricao">descrição</label>
              <textarea class="summernote" id="descricao" name="descricao"></textarea>
            </div>
            <input type="hidden" name="dataPublicacao" th:value="${#dates.format(#dates.createToday(), 'yyyy-MM-dd')}"/>
            <input type="hidden" name="autor" th:value="${usuario.id}"/>
            <input type="hidden" name="forum" th:value="${forum.id}">
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onclick="save_topic(this)">Enviar</button>
        </div>
      </div>
    </div>
  </div>
</th:block>
