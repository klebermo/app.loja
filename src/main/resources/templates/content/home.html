<th:block th:fragment="copy">
  <div class="container" th:each="c : ${categorias}">
    <h4>
      <th:block th:if="${c.icone}">
        <img th:src="@{/imagem/download/__${c.icone.id}__}" width=64 height=64 th:alt="${c.nome}"/>
      </th:block>

      <th:block th:unless="${c.icone}">
        <i class="fas fa-list-alt"></i>
      </th:block>

      <span th:each="t : ${c.nome}" th:if="${#strings.equals(#strings.substringBefore(t.idioma,','), #strings.replace(#locale,'_','-'))}" th:text="${t.conteudo}"></span>
    </h4>

    <div class="row">
      <div class="col-sm" th:each="p,stat : ${produtos}" th:if="${#strings.equals(p.categoria, c) and stat.index < 5}">
        <div class="card" style="width: 18rem;">
          <th:block th:if="${p.icone}">
            <img th:src="@{/imagem/download/__${p.icone.id}__}" class="card-img-top" th:alt="${p.nome}">
          </th:block>

          <th:block th:unless="${p.icone}">
            <i class="fas fa-box"></i>
          </th:block>

          <div class="card-body">
            <h5 class="card-title" th:text="${p.nome}"></h5>
            <p class="card-text" th:each="r : ${p.resumo}" th:if="${#strings.equals(#strings.substringBefore(r.idioma,','), #strings.replace(#locale,'_','-'))}" th:text="${r.conteudo}"></p>
            <a class="btn btn-primary" th:href="@{/p/__${p.nome}__}">Ver detalhes</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</th:block>
