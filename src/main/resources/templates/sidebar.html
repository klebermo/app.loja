<th:block th:fragment="copy">
  <ul class="list-unstyled" th:if="${produto}">
    <li class="media" th:each="img : ${produto.thumbnails}">
      <img th:src="@{/imagem/download/__${img.id}))}" class="mr-3" th:alt="${produto.nome}">
    </li>
  </ul>

  <ul class="nav nav-pills flex-column">
    <li class="nav-item" th:if="${categoria == null and produto == null and pagina == null}" th:each="c : ${categorias}">
      <a th:each="t : ${c.nome}" th:if="${#strings.equals(#strings.substringBefore(t.idioma,','), #strings.replace(#locale,'_','-'))}" class="nav-link" th:href="@{/c/__${t.conteudo}__}" th:text="${t.conteudo}"></a>
    </li>

    <th:block th:if="${pagina}" th:each="p : ${paginas}">
      <th:block th:if="${p.parent != null and #strings.equals(p.parent, pagina)}">
        <li class="nav-item">
            <a th:href="@{/page/__${p.slug}__}" class="nav-link" th:text="${p.titulo}"></a>
        </li>
      </th:block>
    </th:block>

    <li class="nav-item" th:if="${produto}" th:each="c : ${categorias}">
      <a th:with="categoria = ${produto.categoria}" th:each="t : ${c.nome}" th:if="${#strings.equals(#strings.substringBefore(t.idioma,','), #strings.replace(#locale,'_','-'))}" th:href="@{/c/__${t.conteudo}__}" th:class="${#strings.equals(categoria.id, c.id)}? 'nav-link active' : 'nav-link'" th:text="${t.conteudo}"></a>
    </li>

    <li class="nav-item" th:if="${categoria}" th:each="c : ${categorias}">
      <a th:each="t : ${c.nome}" th:if="${#strings.equals(#strings.substringBefore(t.idioma,','), #strings.replace(#locale,'_','-'))}" th:href="@{/c/__${t.conteudo}__}" th:class="${#strings.equals(categoria.id, c.id)}? 'nav-link active' : 'nav-link'" th:text="${t.conteudo}"></a>
    </li>
  </ul>
</th:block>
