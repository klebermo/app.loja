<th:block th:fragment="copy">
  <input type="hidden" name="forum" th:value="${command.forum}"/>

  <div class="row">
    <div class="col-25">
      <button type="button" class="btn_upload" id="btn_upload_icone" data-target="icone" onclick="select_imagem(this);">
        <img th:if="${command.icone}" class="thumbnail" id="single_image" th:src="@{/imagem/download/__${command.icone.id}__}" th:alt="${command.nome}">
        <img th:unless="${command.icone}" class="thumbnail" id="empty_image" th:src="@{/images/icon_add_imagem.png}" alt="icone do produto"/>
        <input type="file" accept="png" class="image-uploader" id="icone" style="display: none;" th:attr="data-target=${'icone'}, data-url=@{/imagem/upload}, data-path=@{/imagem/download}" onchange="image_upload(this);"/>
      </button>
    </div>
    <div class="col-75">
      <input type="text" th:field="*{nome}" id="nome" placeholder="Nome">
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-25">
      <label for="categoria">Categoria</label>
    </div>
    <div class="col-75">
      <select class="form-control" id="categoria" th:field="*{categoria}">
        <option th:each="categoria : ${categorias}" th:value="${categoria.id}" th:selected="${#strings.equals(categoria, command.categoria)}">
          <span th:each="t : ${categoria.nome}" th:if="${#strings.equals(#strings.substringBefore(t.idioma,','), #strings.replace(#locale,'_','-'))}" th:href="@{/c/__${t.conteudo}__}" th:text="${t.conteudo}"></span>
        </option>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="col-25">
      <label for="preco">Pre&ccedil;o</label>
    </div>
    <div class="col-75">
      <input type="text" th:field="*{preco}" class="form-control" id="preco" placeholder="Pre&ccedil;o">
    </div>
  </div>

  <hr/>

  <!-- Tab links -->
  <div class="tab_idioma">
    <button type="button" th:each="idioma,stat : ${idiomas.listaDeIdiomas}" th:class="${stat.index == 0}? 'tabidioma active' : 'tabidioma'" th:id="${#strings.substringBefore(idioma,',') + '-tab'}" th:attr="data-id=${#strings.substringBefore(idioma,',')}" onclick="openIdiomaTab(this)" th:text="${#strings.substringBefore(idioma,',')}"></button>
  </div>

  <!-- Tab content -->
  <div th:each="idioma,stat : ${idiomas.listaDeIdiomas}" th:id="${#strings.substringBefore(idioma,',')}" class="tabcontent_idioma" th:style="${stat.index == 0}? 'display: block;': 'display: none;'">
    <div class="row">
      <div class="col-25">
        <label for="resumo">Resumo</label>
      </div>
      <div class="col-75">
        <input type="hidden" th:name="${'nome[' + stat.index + '].id'}" th:each="value : ${command.resumo}" th:if="${#strings.equals(value.idioma, idioma)}" th:value="${value.id}"/>
        <input type="hidden" th:name="${'resumo['+stat.index+'].idioma'}" th:value="${idioma}"/>
        <th:block th:if="${command.resumo}">
          <input type="text" th:name="${'resumo['+stat.index+'].conteudo'}" th:each="value : ${command.resumo}" th:if="${#strings.equals(value.idioma, idioma)}" th:value="${value.conteudo}" id="resumo" placeholder="Resumo">
        </th:block>
        <input th:unless="${command.resumo}" type="text" th:name="${'resumo['+stat.index+'].conteudo'}" id="resumo" placeholder="Resumo">
      </div>
    </div>

    <div class="row">
      <div class="col-75">
        <input type="hidden" th:name="${'nome[' + stat.index + '].id'}" th:each="value : ${command.descricao}" th:if="${#strings.equals(value.idioma, idioma)}" th:value="${value.id}"/>
        <input type="hidden" th:name="${'descricao['+stat.index+'].idioma'}" th:value="${idioma}"/>
        <th:block th:if="${command.descricao}">
          <textarea th:name="${'descricao['+stat.index+'].conteudo'}" th:each="value : ${command.resumo}" th:if="${#strings.equals(value.idioma, idioma)}" th:text="${value.conteudo}" id="descricao"></textarea>
        </th:block>
        <textarea th:unless="${command.descricao}" th:name="${'descricao['+stat.index+'].conteudo'}" id="descricao"></textarea>
      </div>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-25">
      <label for="thumbnails">Thumbnails</label>
    </div>
    <div class="col-75">
      <table>
        <tr>
          <td>
            <button type="button" class="btn_upload" id="btn_upload_gallery" data-target="thumbnails" onclick="select_imagem(this);">
              <img class="thumbnail" th:src="@{/images/icon_add_imagem.png}" alt="adicionar icone"/>
              <input type="file" accept="image/jpeg" class="image-uploader" id="thumbnails" style="display: none;" th:attr="data-target=${'thumbnails'}, data-url=@{/imagem/upload}, data-path=@{/imagem/download}" onchange="image_upload(this);"/>
            </button>
          </td>
          <td>
            <div class="gallery" id="gallery">
              <th:block th:each="img,stat : ${command.thumbnails}">
                <input type="hidden" th:field="*{thumbnails}" th:value="${img.id}"/>
                <img class="thumbnail" th:id="${'image_'+img.id}" th:src="@{/imagem/download/__${img.id}__}" th:alt="${command.nome}">
              </th:block>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <div class="row">
    <div class="col-25">
      <label for="versaoGratuita">Vers&atilde;o Gratuita</label>
    </div>
    <div class="col-75">
      <table>
        <tr>
          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoGratuita_exe" data-target="versaoGratuita_exe" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoGratuita}" th:if="${string.equals(arq.type, 'exe')}" type="hidden" th:field="*{versaoGratuita}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoGratuita_exe" th:src="@{/images/icon_windows.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoGratuita_exe" th:src="@{/images/icon_windows_off.png}"/>
              <input type="file" accept="exe" class="file-uploader" id="versaoGratuita_exe" style="display: none;" th:attr="data-target=${'versaoGratuita'}, data-url=@{/arquivo/upload}, data-path=@{/arquivo/download}" onchange="file_upload(this);"/>
            </button>
          </td>

          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoGratuita_dmg" data-target="versaoGratuita_dmg" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoGratuita}" th:if="${string.equals(arq.type, 'dmg')}" type="hidden" th:field="*{versaoGratuita}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoGratuita_dmg" th:src="@{/images/icon_macosx.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoGratuita_dmg" th:src="@{/images/icon_macosx_off.png}"/>
              <input type="file" accept="dmg" class="file-uploader" id="versaoGratuita_dmg" style="display: none;" th:attr="data-target=${'versaoGratuita'}, data-url=@{/arquivo/upload}, data-path=@{/arquivo/download}" onchange="file_upload(this);"/>
            </button>
          </td>

          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoGratuita_rpm" data-target="versaoGratuita_rpm" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoGratuita}" th:if="${string.equals(arq.type, 'rpm')}" type="hidden" th:field="*{versaoGratuita}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoGratuita_rpm" th:src="@{/images/icon_linux_rpm.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoGratuita_rpm" th:src="@{/images/icon_linux_rpm_off.png}"/>
              <input type="file" accept="rpm" class="file-uploader" id="versaoGratuita_rpm" style="display: none;" th:attr="data-target=${'versaoGratuita'}, data-url=@{/arquivo/upload}, data-path=@{/arquivo/download}" onchange="file_upload(this);"/>
            </button>
          </td>

          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoGratuita_deb" data-target="versaoGratuita_deb" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoGratuita}" th:if="${string.equals(arq.type, 'deb')}" type="hidden" th:field="*{versaoGratuita}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoGratuita_deb" th:src="@{/images/icon_linux_deb.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoGratuita_deb" th:src="@{/images/icon_linux_deb_off.png}"/>
              <input type="file" accept="deb" class="file-uploader" id="versaoGratuita_deb" style="display: none;" th:attr="data-target=${'versaoGratuita'}, data-url=@{/arquivo/upload}, data-path=@{/arquivo/download}" onchange="file_upload(this);"/>
            </button>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <div class="row">
    <div class="col-25">
      <label for="versaoGratuita">Vers&atilde;o Paga</label>
    </div>
    <div class="col-75">
      <table>
        <tr>
          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoPaga_exe" data-target="versaoPaga_exe" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoPaga}" th:if="${string.equals(arq.type, 'exe')}" type="hidden" th:field="*{versaoPaga}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoPaga_exe" th:src="@{/images/icon_windows.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoPaga_exe" th:src="@{/images/icon_windows_off.png}"/>
              <input type="file" accept="exe" class="file-uploader" id="versaoPaga_exe" style="display: none;" th:attr="data-target=${'versaoPaga'}, data-url=@{/arquivo/upload}, data-path=@{/imagem/download}" onchange="file_upload(this);"/>
            </button>
          </td>

          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoPaga_dmg" data-target="versaoPaga_dmg" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoPaga}" th:if="${string.equals(arq.type, 'dmg')}" type="hidden" th:field="*{versaoPaga}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoPaga_dmg" th:src="@{/images/icon_macosx.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoPaga_dmg" th:src="@{/images/icon_macosx_off.png}"/>
              <input type="file" accept="dmg" class="file-uploader" id="versaoPaga_dmg" style="display: none;" th:attr="data-target=${'versaoPaga'}, data-url=@{/arquivo/upload}, data-path=@{/arquivo/download}" onchange="file_upload(this);"/>
            </button>
          </td>

          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoPaga_rpm" data-target="versaoPaga_rpm" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoPaga}" th:if="${string.equals(arq.type, 'rpm')}" type="hidden" th:field="*{versaoPaga}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoPaga_rpm" th:src="@{/images/icon_linux_rpm.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoPaga_rpm" th:src="@{/images/icon_linux_rpm_off.png}"/>
              <input type="file" accept="rpm" class="file-uploader" id="versaoPaga_rpm" style="display: none;" th:attr="data-target=${'versaoPaga'}, data-url=@{/arquivo/upload}, data-path=@{/arquivo/download}" onchange="file_upload(this);"/>
            </button>
          </td>

          <td>
            <button type="button" class="btn_upload" id="btn_upload_versaoPaga_deb" data-target="versaoPaga_deb" onclick="select_file(this);">
              <input th:each="arq : ${command.versaoPaga}" th:if="${string.equals(arq.type, 'deb')}" type="hidden" th:field="*{versaoPaga}" th:value="${arq.id}"/>
              <img th:style="${command.icone}? 'display: block' : 'display: none'" class="thumbnail" id="single_versaoPaga_deb" th:src="@{/images/icon_linux_deb.png}"/>
              <img th:style="${command.icone}? 'display: none' : 'display: block'" class="thumbnail" id="empty_versaoPaga_deb" th:src="@{/images/icon_linux_deb_off.png}"/>
              <input type="file" accept="deb" class="file-uploader" id="versaoPaga_deb" style="display: none;" th:attr="data-target=${'versaoPaga'}, data-url=@{/arquivo/upload}, data-path=@{/arquivo/download}" onchange="file_upload(this);"/>
            </button>
          </td>
        </tr>
      </table>
    </div>
  </div>
</th:block>
