<th:block th:fragment="copy">
  <div class="container">
    <h4>Mensagens</h4>

    <hr>

    <th:block th:each="msg : ${messages}">
      <div class="alert alert-secondary" role="alert">
        <a href="#" th:attr="data-id=${msg.id}" onclick="open_message(this);">
          <b th:if="${msg.resposta}" th:utext="${msg.titulo}"></b>
          <i th:unless="${msg.resposta}" th:utext="${msg.titulo}"></i>
        </a>
      </div>

      <div class="jumbotron" th:id="${'message-' + msg.id}" style="display: none;">
        <p class="lead" th:utext="${msg.descricao}"></p>
        <hr class="my-4">
        <p> Enviado em <b th:text="${#dates.format(msg.dataPublicacao, 'dd/MMM/yyyy')}"></b> por <b th:text="${msg.autor}"></b> </p>

        <div th:unless="${msg.resposta}" class="jumbotron" id="form_resposta" style="display: none;">
          <p class="lead">
            <form class="form" id="form" th:action="@{/resposta/save}" method="post">
              <div class="form-group">
                <label for="titulo">titulo</label>
                <input type="text" name="titulo" class="form-control" id="titulo">
              </div>
              <div class="form-group">
                <label for="descricao">descrição</label>
                <textarea class="summernote" id="descricao" name="descricao"></textarea>
              </div>
              <input type="hidden" name="dataPublicacao" id="dataPublicacao" th:value="${#dates.format(#dates.createToday(), 'yyyy-MM-dd')}"/>
            </form>
          </p>
        </div>

        <div th:if="${msg.resposta}" class="jumbotron" id="${'resposta-' + msg.id}" style="display: none;">
          <a href="#" onclick="close_resposta(this);">
            <h1 class="display-4" th:utext="${msg.resposta.titulo}"></h1>
          </a>
          <p class="lead" th:utext="${msg.resposta.descricao}"></p>
          <hr class="my-4">
          <p> Enviado em <b th:text="${#dates.format(msg.resposta.dataPublicacao, 'dd/MMM/yyyy')}"></b> por <b th:text="${msg.resposta.autor}"></b> </p>
        </div>

        <a th:if="${msg.resposta}" class="btn btn-primary btn-lg" th:attr="data-id=${msg.id}" href="#" role="button" onclick="open_resposta(this);">Resposta</a>
        <a th:unless="${msg.resposta}" class="btn btn-primary btn-lg" th:attr="data-id=${msg.id}, data-add=@{/topic/add_resposta}" href="#" role="button" onclick="responder(this);">Responder</a>
        <a th:unless="${msg.resposta}" class="btn btn-primary btn-lg" th:attr="data-id=${msg.id}" href="#" role="button" onclick="close_message(this);">Fechar</a>
      </div>
    </th:block>
  </div>
</th:block>
